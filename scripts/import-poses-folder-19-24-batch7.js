const { createClient } = require('@supabase/supabase-js');
const fs = require('fs');

const envContent = fs.readFileSync('.env.local', 'utf-8');
envContent.split('\n').forEach(line => {
  const trimmed = line.trim();
  if (trimmed && !trimmed.startsWith('#')) {
    const eqIndex = trimmed.indexOf('=');
    if (eqIndex > 0) {
      process.env[trimmed.substring(0, eqIndex).trim()] = trimmed.substring(eqIndex + 1).trim();
    }
  }
});

const supabase = createClient(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY);

const poses = [
  {
    slug: 'boat-leg-lift',
    english_name: 'Boat Leg Lift',
    sanskrit_name: 'Navasana Prep',
    sanskrit_name_simplified: 'Navasana',
    pronunciation: 'nah-VAHS-ah-nah',
    short_description: 'A reclined position with both legs lifted off the floor.',
    description: 'This pose strengthens the core and improves body awareness by lifting both legs while lying on the back. It builds the foundation for Boat Pose variations.',
    benefits: ['Strengthens core muscles', 'Improves body awareness', 'Builds abdominal strength', 'Prepares for Boat Pose', 'Develops control'],
    cautions: ['Keep lower back supported', 'Avoid neck strain'],
    contraindications: ['Lower back injury'],
    step_by_step: ['Lie on back with arms by sides', 'Press lower back into mat', 'Engage core muscles', 'Lift both legs off floor', 'Keep legs together', 'Hold with controlled breath'],
    alignment_cues: ['Breathe steadily throughout', 'Relax shoulders into mat', 'Press lower back down', 'Keep legs active'],
    modifications: ['Bend knees if needed', 'Lift legs higher'],
    variations: ['Legs at different angles', 'With arm movements'],
    tags: ['supine', 'core', 'strength', 'beginner'],
    equipment: ['yoga mat'],
    difficulty: 'beginner',
    pose_type: 'supine',
    primary_focus: 'core',
    secondary_focus: ['hips'],
    duration_hint_seconds: 30,
    is_peak_pose: false,
    is_warmup: true,
    is_cooldown: false,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Boat Leg Lift Pose Guide',
    meta_description: 'Build core strength with Boat Leg Lift. This gentle preparation strengthens the abdomen and prepares for Boat Pose.',
    image_alt: 'Yoga practitioner lifting both legs while lying on back.',
    image_original_filename: 'FLOW-19-24.131.png'
  },
  {
    slug: 'supine-arm-stretch',
    english_name: 'Supine Arm Stretch',
    sanskrit_name: 'Supta Hastasana',
    sanskrit_name_simplified: 'Supta Hastasana',
    pronunciation: 'SOOP-tah hah-STAHS-ah-nah',
    short_description: 'A relaxed supine pose with arms reaching upward.',
    description: 'This gentle posture opens the shoulders and encourages relaxation while lying on the back. The arms reaching overhead create a full-body stretch.',
    benefits: ['Opens shoulders gently', 'Relieves upper body tension', 'Promotes relaxation', 'Lengthens spine', 'Calms nervous system'],
    cautions: ['Keep ribs relaxed', 'Avoid arching back excessively'],
    contraindications: ['Shoulder injury'],
    step_by_step: ['Lie on back', 'Extend legs comfortably', 'Reach arms overhead', 'Rest arms on floor or props', 'Relax entire body', 'Breathe deeply'],
    alignment_cues: ['Slow deep breathing', 'Let ribs soften down', 'Relax shoulders completely', 'Allow body to be heavy'],
    modifications: ['Use bolster under arms', 'Bend elbows if needed'],
    variations: ['Arms wide', 'With side stretch'],
    tags: ['supine', 'restorative', 'shoulders', 'beginner'],
    equipment: ['yoga mat'],
    difficulty: 'beginner',
    pose_type: 'supine',
    primary_focus: 'shoulders',
    secondary_focus: ['chest'],
    duration_hint_seconds: 60,
    is_peak_pose: false,
    is_warmup: false,
    is_cooldown: true,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Supine Arm Stretch Pose Guide',
    meta_description: 'Open your shoulders and relax with Supine Arm Stretch. This gentle pose relieves tension and promotes calm.',
    image_alt: 'Yoga practitioner lying on back with arms stretched overhead.',
    image_original_filename: 'FLOW-19-24.132.png'
  },
  {
    slug: 'happy-baby',
    english_name: 'Happy Baby Pose',
    sanskrit_name: 'Ananda Balasana',
    sanskrit_name_simplified: 'Ananda Balasana',
    pronunciation: 'ah-NAHN-dah bah-LAHS-ah-nah',
    short_description: 'A supine posture holding the feet with knees bent.',
    description: 'This playful pose releases the hips and massages the spine while lying on the back. Like a happy baby, this pose encourages relaxation and joy.',
    benefits: ['Opens hips deeply', 'Relieves lower back tension', 'Massages spine', 'Calms the mind', 'Releases stress'],
    cautions: ['Keep tailbone grounded', 'Relax neck completely'],
    contraindications: ['Hip injury', 'Knee injury'],
    step_by_step: ['Lie on back', 'Bend knees toward chest', 'Grab outer edges of feet', 'Open knees wider than torso', 'Stack ankles over knees', 'Rock gently side to side'],
    alignment_cues: ['Gentle rocking motion', 'Deep relaxed breaths', 'Keep tailbone down', 'Soften inner thighs'],
    modifications: ['Use strap around feet', 'Hold behind knees'],
    variations: ['One leg at a time', 'With stillness'],
    tags: ['supine', 'hips', 'restorative', 'beginner'],
    equipment: ['yoga mat'],
    difficulty: 'beginner',
    pose_type: 'supine',
    primary_focus: 'hips',
    secondary_focus: ['spine'],
    duration_hint_seconds: 60,
    is_peak_pose: false,
    is_warmup: false,
    is_cooldown: true,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Happy Baby Pose (Ananda Balasana) Guide',
    meta_description: 'Release hip tension and find joy in Happy Baby Pose. This playful posture massages the spine and calms the mind.',
    image_alt: 'Yoga practitioner holding feet in Happy Baby Pose.',
    image_original_filename: 'FLOW-19-24.133.png'
  },
  {
    slug: 'wide-happy-baby',
    english_name: 'Wide Happy Baby',
    sanskrit_name: 'Ananda Balasana',
    sanskrit_name_simplified: 'Ananda Balasana',
    pronunciation: 'ah-NAHN-dah bah-LAHS-ah-nah',
    short_description: 'A variation of happy baby with legs wider apart.',
    description: 'This variation deepens the hip opening and relaxation of Happy Baby by taking the legs wider. It provides an intense stretch for the inner thighs and groins.',
    benefits: ['Deep hip opening', 'Relieves stress deeply', 'Stretches inner thighs', 'Releases groin tension', 'Promotes relaxation'],
    cautions: ['Avoid forcing knees down', 'Relax shoulders throughout'],
    contraindications: ['Hip injury', 'Groin strain'],
    step_by_step: ['Enter Happy Baby', 'Open legs wider', 'Hold outer feet or ankles', 'Keep knees bent', 'Relax entire body', 'Breathe into hip opening'],
    alignment_cues: ['Breathe deeply into hips', 'Let inner thighs soften', 'Keep tailbone grounded', 'Relax jaw and face'],
    modifications: ['Support head with pillow', 'Use straps on feet'],
    variations: ['With gentle rocking', 'Asymmetrical'],
    tags: ['supine', 'hips', 'restorative', 'beginner'],
    equipment: ['yoga mat'],
    difficulty: 'beginner',
    pose_type: 'supine',
    primary_focus: 'hips',
    secondary_focus: ['hips'],
    duration_hint_seconds: 60,
    is_peak_pose: false,
    is_warmup: false,
    is_cooldown: true,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Wide Happy Baby Pose Guide',
    meta_description: 'Deepen your hip opening with Wide Happy Baby. This variation stretches inner thighs and promotes deep relaxation.',
    image_alt: 'Yoga practitioner in Wide Happy Baby with legs spread apart.',
    image_original_filename: 'FLOW-19-24.134.png'
  },
  {
    slug: 'headstand-prep-2',
    english_name: 'Headstand Preparation',
    sanskrit_name: 'Sirsasana Prep',
    sanskrit_name_simplified: 'Sirsasana',
    pronunciation: 'sheer-SHAH-sah-nah',
    short_description: 'A forearm-supported inversion preparation.',
    description: 'This pose builds the strength and body awareness needed for safe inversions. The forearm foundation develops shoulder stability before attempting headstand.',
    benefits: ['Builds shoulder strength', 'Improves focus', 'Prepares for inversions', 'Develops core control', 'Builds confidence'],
    cautions: ['Protect neck at all times', 'Engage shoulders actively'],
    contraindications: ['Neck injury', 'High blood pressure'],
    step_by_step: ['Kneel on mat', 'Interlace fingers, forearms down', 'Place crown of head in hands', 'Tuck toes and lift hips', 'Walk feet toward head', 'Hold with strength'],
    alignment_cues: ['Controlled steady breathing', 'Press forearms firmly', 'Lift shoulders away from ears', 'Engage core'],
    modifications: ['Practice near wall', 'Use blanket under head'],
    variations: ['With leg lifts', 'Walking feet closer'],
    tags: ['inversion', 'strength', 'shoulders', 'intermediate'],
    equipment: ['yoga mat'],
    difficulty: 'intermediate',
    pose_type: 'inversion',
    primary_focus: 'shoulders',
    secondary_focus: ['core'],
    duration_hint_seconds: 30,
    is_peak_pose: false,
    is_warmup: false,
    is_cooldown: false,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Headstand Preparation Pose Guide',
    meta_description: 'Build strength for inversions with Headstand Preparation. This foundational pose develops shoulder stability safely.',
    image_alt: 'Yoga practitioner in headstand preparation position.',
    image_original_filename: 'FLOW-19-24.135.png'
  },
  {
    slug: 'happy-baby-2',
    english_name: 'Happy Baby Pose',
    sanskrit_name: 'Ananda Balasana',
    sanskrit_name_simplified: 'Ananda Balasana',
    pronunciation: 'ah-NAHN-dah bah-LAHS-ah-nah',
    short_description: 'A relaxed supine hip-opening posture.',
    description: 'This classic pose releases tension in the hips and spine while promoting a sense of ease. The gentle nature makes it accessible to all practitioners.',
    benefits: ['Opens hips effectively', 'Relaxes the spine', 'Calms the mind', 'Releases lower back', 'Promotes joy'],
    cautions: ['Keep back grounded', 'Relax jaw throughout'],
    contraindications: ['Hip injury'],
    step_by_step: ['Lie on back', 'Draw knees to chest', 'Hold outer feet', 'Open knees wide', 'Keep ankles over knees', 'Relax and breathe'],
    alignment_cues: ['Slow relaxed breathing', 'Soften entire body', 'Let hips release', 'Keep shoulders down'],
    modifications: ['Use strap around feet', 'Hold shins instead'],
    variations: ['With rocking', 'One leg at a time'],
    tags: ['supine', 'hips', 'restorative', 'beginner'],
    equipment: ['yoga mat'],
    difficulty: 'beginner',
    pose_type: 'supine',
    primary_focus: 'hips',
    secondary_focus: ['spine'],
    duration_hint_seconds: 60,
    is_peak_pose: false,
    is_warmup: false,
    is_cooldown: true,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Happy Baby Pose (Ananda Balasana) Guide',
    meta_description: 'Release hip tension in Happy Baby Pose. This calming posture opens the hips and relaxes the entire body.',
    image_alt: 'Yoga practitioner relaxing in Happy Baby Pose.',
    image_original_filename: 'FLOW-19-24.136.png'
  },
  {
    slug: 'supine-figure-four',
    english_name: 'Supine Figure Four',
    sanskrit_name: 'Supta Kapotasana',
    sanskrit_name_simplified: 'Supta Kapotasana',
    pronunciation: 'SOOP-tah kah-poh-TAHS-ah-nah',
    short_description: 'A reclined hip stretch with ankle crossed over thigh.',
    description: 'This pose stretches the outer hips and glutes while lying on the back. The figure-four shape targets the piriformis and deep hip rotators.',
    benefits: ['Stretches glutes deeply', 'Relieves hip tension', 'Opens outer hips', 'Reduces sciatic discomfort', 'Calms nervous system'],
    cautions: ['Protect knees carefully', 'Relax shoulders down'],
    contraindications: ['Knee injury'],
    step_by_step: ['Lie on back', 'Bend both knees, feet flat', 'Cross right ankle over left thigh', 'Thread hands through and hold left thigh', 'Draw legs toward chest', 'Switch sides'],
    alignment_cues: ['Steady relaxed breathing', 'Flex crossed foot', 'Keep head on mat', 'Relax shoulders'],
    modifications: ['Use strap around thigh', 'Keep foot on floor'],
    variations: ['With gentle rocking', 'Deeper pull'],
    tags: ['supine', 'hips', 'stretch', 'beginner'],
    equipment: ['yoga mat'],
    difficulty: 'beginner',
    pose_type: 'supine',
    primary_focus: 'hips',
    secondary_focus: ['core'],
    duration_hint_seconds: 30,
    is_peak_pose: false,
    is_warmup: false,
    is_cooldown: true,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Supine Figure Four (Reclined Pigeon) Guide',
    meta_description: 'Stretch your glutes and outer hips with Supine Figure Four. This accessible pose relieves hip tension effectively.',
    image_alt: 'Yoga practitioner in Supine Figure Four stretch.',
    image_original_filename: 'FLOW-19-24.137.png'
  },
  {
    slug: 'supine-spinal-twist',
    english_name: 'Supine Spinal Twist',
    sanskrit_name: 'Supta Matsyendrasana',
    sanskrit_name_simplified: 'Supta Matsyendrasana',
    pronunciation: 'SOOP-tah maht-see-en-DRAHS-ah-nah',
    short_description: 'A reclined twist with knees bent to one side.',
    description: 'This restorative pose massages internal organs and releases spinal tension. The gentle twist while lying down promotes digestion and relaxation.',
    benefits: ['Releases spinal tension', 'Improves digestion', 'Massages organs', 'Calms nervous system', 'Relieves lower back'],
    cautions: ['Keep shoulders grounded', 'Avoid forcing twist'],
    contraindications: ['Spinal injury'],
    step_by_step: ['Lie on back', 'Bend both knees', 'Drop knees to one side', 'Extend arms out', 'Turn head opposite to knees', 'Breathe and relax'],
    alignment_cues: ['Deep relaxed breathing', 'Let knees be heavy', 'Keep both shoulders down', 'Soften belly'],
    modifications: ['Use bolster between knees', 'Support top knee'],
    variations: ['Straight bottom leg', 'Eagle legs'],
    tags: ['supine', 'twist', 'restorative', 'beginner'],
    equipment: ['yoga mat'],
    difficulty: 'beginner',
    pose_type: 'supine',
    primary_focus: 'spine',
    secondary_focus: ['hips'],
    duration_hint_seconds: 60,
    is_peak_pose: false,
    is_warmup: false,
    is_cooldown: true,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Supine Spinal Twist (Supta Matsyendrasana) Guide',
    meta_description: 'Release spinal tension with Supine Spinal Twist. This gentle restorative pose improves digestion and calms the mind.',
    image_alt: 'Yoga practitioner in Supine Spinal Twist with knees dropped to side.',
    image_original_filename: 'FLOW-19-24.138.png'
  },
  {
    slug: 'supine-spinal-twist-gaze',
    english_name: 'Supine Spinal Twist with Gaze',
    sanskrit_name: 'Supta Matsyendrasana',
    sanskrit_name_simplified: 'Supta Matsyendrasana',
    pronunciation: 'SOOP-tah maht-see-en-DRAHS-ah-nah',
    short_description: 'A reclined twist with gaze turned opposite.',
    description: 'This variation deepens the spinal release by turning the head opposite to the knees. The opposing rotation creates a complete twist through the entire spine.',
    benefits: ['Releases spine completely', 'Calms nervous system', 'Stretches neck', 'Improves digestion', 'Promotes relaxation'],
    cautions: ['Avoid forcing the twist', 'Keep both shoulders down'],
    contraindications: ['Spinal injury', 'Neck injury'],
    step_by_step: ['Lie on back', 'Bend knees to chest', 'Drop knees to one side', 'Turn head opposite direction', 'Extend arms wide', 'Breathe deeply'],
    alignment_cues: ['Slow gentle breaths', 'Let gravity deepen twist', 'Relax jaw completely', 'Soften entire body'],
    modifications: ['Support knees with bolster', 'Keep gaze neutral'],
    variations: ['With straight legs', 'With bound variation'],
    tags: ['supine', 'twist', 'restorative', 'beginner'],
    equipment: ['yoga mat'],
    difficulty: 'beginner',
    pose_type: 'supine',
    primary_focus: 'spine',
    secondary_focus: ['hips'],
    duration_hint_seconds: 60,
    is_peak_pose: false,
    is_warmup: false,
    is_cooldown: true,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Supine Spinal Twist with Gaze Guide',
    meta_description: 'Deepen your spinal release with this twist variation. Turn your gaze opposite for complete spinal opening.',
    image_alt: 'Yoga practitioner in Supine Twist with head turned opposite to knees.',
    image_original_filename: 'FLOW-19-24.139.png'
  },
  {
    slug: 'supine-spinal-twist-open-arms',
    english_name: 'Supine Spinal Twist Open Arms',
    sanskrit_name: 'Supta Matsyendrasana',
    sanskrit_name_simplified: 'Supta Matsyendrasana',
    pronunciation: 'SOOP-tah maht-see-en-DRAHS-ah-nah',
    short_description: 'A relaxed supine twist with arms open wide.',
    description: 'This restorative variation gently resets the spine and promotes complete relaxation. With arms extended wide, the chest opens while the spine twists.',
    benefits: ['Relieves full-body tension', 'Promotes deep relaxation', 'Opens chest while twisting', 'Releases spine', 'Calms mind'],
    cautions: ['Relax shoulders completely', 'Stay passive in pose'],
    contraindications: ['Spinal injury'],
    step_by_step: ['Lie on back', 'Extend arms wide like a T', 'Bend knees toward chest', 'Lower knees to one side', 'Let body rest completely', 'Breathe naturally'],
    alignment_cues: ['Natural easy breathing', 'Let body be completely passive', 'Allow gravity to work', 'Release all effort'],
    modifications: ['Use bolster under knees', 'Support arm with blanket'],
    variations: ['With straight legs', 'With eagle legs'],
    tags: ['supine', 'twist', 'restorative', 'beginner'],
    equipment: ['yoga mat'],
    difficulty: 'beginner',
    pose_type: 'supine',
    primary_focus: 'spine',
    secondary_focus: ['chest'],
    duration_hint_seconds: 120,
    is_peak_pose: false,
    is_warmup: false,
    is_cooldown: true,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Supine Spinal Twist Open Arms Guide',
    meta_description: 'Reset your body with Supine Spinal Twist Open Arms. This restorative pose releases the spine and opens the chest.',
    image_alt: 'Yoga practitioner resting in Supine Twist with arms wide open.',
    image_original_filename: 'FLOW-19-24.140.png'
  }
];

async function importPoses() {
  console.log(`Importing ${poses.length} poses from folder 19-24 (131-140)...\n`);
  
  let created = 0, updated = 0, errors = 0;

  for (const pose of poses) {
    const { data: existing } = await supabase.from('poses').select('id').eq('slug', pose.slug).single();

    if (existing) {
      const { error } = await supabase.from('poses').update(pose).eq('slug', pose.slug);
      if (error) { console.log(`Error updating ${pose.slug}:`, error.message); errors++; }
      else { console.log(`Updated: ${pose.english_name}`); updated++; }
    } else {
      const { error } = await supabase.from('poses').insert(pose);
      if (error) { console.log(`Error creating ${pose.slug}:`, error.message); errors++; }
      else { console.log(`Created: ${pose.english_name}`); created++; }
    }
  }

  const { count } = await supabase.from('poses').select('*', { count: 'exact', head: true });
  console.log(`\n=== Import Complete ===\nCreated: ${created}\nUpdated: ${updated}\nErrors: ${errors}\nTotal poses: ${count}`);
}

importPoses();
