const { createClient } = require('@supabase/supabase-js');
const fs = require('fs');

const envContent = fs.readFileSync('.env.local', 'utf-8');
envContent.split('\n').forEach(line => {
  const trimmed = line.trim();
  if (trimmed && !trimmed.startsWith('#')) {
    const eqIndex = trimmed.indexOf('=');
    if (eqIndex > 0) {
      process.env[trimmed.substring(0, eqIndex).trim()] = trimmed.substring(eqIndex + 1).trim();
    }
  }
});

const supabase = createClient(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY);

const poses = [
  {
    slug: 'side-lying-leg-cross',
    english_name: 'Side Lying Leg Cross',
    sanskrit_name: 'Anantasana Variation',
    sanskrit_name_simplified: 'Anantasana',
    pronunciation: 'ah-nahn-TAHS-ah-nah',
    short_description: 'A side-lying posture with the top leg crossed forward.',
    description: 'This gentle pose mobilizes the hips and releases lower back tension while lying on the side. The crossed leg creates a gentle twist and hip opening.',
    benefits: ['Opens hips gently', 'Relieves lower back tension', 'Improves hip mobility', 'Calms nervous system', 'Promotes relaxation'],
    cautions: ['Keep spine neutral', 'Avoid rolling forward'],
    contraindications: ['Hip injury', 'Lower back pain'],
    step_by_step: ['Lie on one side', 'Support head with bottom arm', 'Cross top leg forward', 'Rest knee on floor or block', 'Relax entire body', 'Breathe slowly and deeply'],
    alignment_cues: ['Relax neck completely', 'Breathe slowly and deeply', 'Keep spine in neutral', 'Let hip release naturally'],
    modifications: ['Use blanket under knee', 'Support head with pillow'],
    variations: ['With arm reach', 'Deeper cross'],
    tags: ['side lying', 'hips', 'restorative', 'beginner'],
    equipment: ['yoga mat'],
    difficulty: 'beginner',
    pose_type: 'supine',
    primary_focus: 'hips',
    secondary_focus: ['spine'],
    duration_hint_seconds: 30,
    is_peak_pose: false,
    is_warmup: false,
    is_cooldown: true,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Side Lying Leg Cross Pose Guide',
    meta_description: 'Release hip tension with Side Lying Leg Cross. This gentle restorative pose opens the hips and calms the nervous system.',
    image_alt: 'Yoga practitioner in side lying position with leg crossed forward.',
    image_original_filename: 'FLOW-19-24.121.png'
  },
  {
    slug: 'side-lying-supported',
    english_name: 'Side Lying Supported Pose',
    sanskrit_name: 'Anantasana Rest',
    sanskrit_name_simplified: 'Anantasana',
    pronunciation: 'ah-nahn-TAHS-ah-nah',
    short_description: 'A supported side-lying resting posture.',
    description: 'This deeply restful pose encourages complete relaxation and spinal ease. Using props for support, the body can release into total rest.',
    benefits: ['Promotes deep relaxation', 'Supports spinal alignment', 'Calms nervous system', 'Relieves fatigue', 'Reduces stress'],
    cautions: ['Support head and neck properly', 'Stay aligned'],
    contraindications: ['Neck injury'],
    step_by_step: ['Lie on one side', 'Place pillow under head', 'Stack legs or place pillow between', 'Rest top arm on body', 'Close eyes', 'Breathe naturally'],
    alignment_cues: ['Soften breath completely', 'Relax jaw and face', 'Let body be heavy', 'Release all effort'],
    modifications: ['Use bolster behind back', 'Pillow between knees'],
    variations: ['With bent knees', 'Fetal position'],
    tags: ['side lying', 'restorative', 'relaxation', 'beginner'],
    equipment: ['yoga mat', 'pillow'],
    difficulty: 'beginner',
    pose_type: 'supine',
    primary_focus: 'spine',
    secondary_focus: ['hips'],
    duration_hint_seconds: 120,
    is_peak_pose: false,
    is_warmup: false,
    is_cooldown: true,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Side Lying Supported Rest Pose Guide',
    meta_description: 'Find deep relaxation in Side Lying Supported Pose. This restorative position calms the nervous system completely.',
    image_alt: 'Yoga practitioner resting peacefully on side with support.',
    image_original_filename: 'FLOW-19-24.122.png'
  },
  {
    slug: 'locust-arms-back',
    english_name: 'Locust Pose Arms Back',
    sanskrit_name: 'Salabhasana',
    sanskrit_name_simplified: 'Salabhasana',
    pronunciation: 'sha-la-BAHS-ah-nah',
    short_description: 'A prone backbend with arms reaching back.',
    description: 'This variation of Locust Pose strengthens the back body while opening the chest. The arms reaching back intensify the shoulder opening and back engagement.',
    benefits: ['Strengthens back muscles', 'Opens chest deeply', 'Improves posture', 'Engages glutes', 'Builds endurance'],
    cautions: ['Avoid neck strain', 'Engage legs actively'],
    contraindications: ['Lower back injury'],
    step_by_step: ['Lie face down', 'Interlace hands behind back', 'Engage back muscles', 'Lift chest off floor', 'Reach arms back', 'Hold with steady breath'],
    alignment_cues: ['Lengthen spine fully', 'Keep breath steady', 'Draw shoulder blades together', 'Keep gaze down'],
    modifications: ['Keep feet on floor', 'Smaller lift'],
    variations: ['With leg lift', 'Arms by sides'],
    tags: ['prone', 'backbend', 'strength', 'intermediate'],
    equipment: ['yoga mat'],
    difficulty: 'intermediate',
    pose_type: 'prone',
    primary_focus: 'spine',
    secondary_focus: ['shoulders'],
    duration_hint_seconds: 30,
    is_peak_pose: false,
    is_warmup: false,
    is_cooldown: false,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Locust Pose Arms Back Variation Guide',
    meta_description: 'Strengthen your back and open your chest with Locust Pose Arms Back. This powerful variation builds strength and improves posture.',
    image_alt: 'Yoga practitioner in Locust Pose with arms reaching back.',
    image_original_filename: 'FLOW-19-24.123.png'
  },
  {
    slug: 'child-pose-compact',
    english_name: 'Compact Child\'s Pose',
    sanskrit_name: 'Balasana',
    sanskrit_name_simplified: 'Balasana',
    pronunciation: 'bah-LAHS-ah-nah',
    short_description: 'A compact kneeling forward fold.',
    description: 'This soothing pose calms the nervous system and gently stretches the back. With knees together and arms by sides, it creates a compact, nurturing shape.',
    benefits: ['Calms the mind', 'Releases spine tension', 'Relieves stress', 'Promotes introspection', 'Rests the body'],
    cautions: ['Support knees if needed', 'Relax neck completely'],
    contraindications: ['Knee injury'],
    step_by_step: ['Kneel with knees together', 'Sit back on heels', 'Fold forward over thighs', 'Rest forehead on mat', 'Arms alongside body', 'Breathe into back body'],
    alignment_cues: ['Slow breathing deeply', 'Let hips soften toward heels', 'Release neck completely', 'Soften belly'],
    modifications: ['Use bolster under chest', 'Blanket under knees'],
    variations: ['Arms extended', 'Knees wide'],
    tags: ['kneeling', 'restorative', 'forward fold', 'beginner'],
    equipment: ['yoga mat'],
    difficulty: 'beginner',
    pose_type: 'kneeling',
    primary_focus: 'spine',
    secondary_focus: ['hips'],
    duration_hint_seconds: 60,
    is_peak_pose: false,
    is_warmup: false,
    is_cooldown: true,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Compact Child\'s Pose (Balasana) Guide',
    meta_description: 'Find peace in Compact Child\'s Pose. This nurturing forward fold calms the mind and releases back tension.',
    image_alt: 'Yoga practitioner resting in compact Child\'s Pose.',
    image_original_filename: 'FLOW-19-24.124.png'
  },
  {
    slug: 'extended-child-pose-2',
    english_name: 'Extended Child\'s Pose',
    sanskrit_name: 'Utthita Balasana',
    sanskrit_name_simplified: 'Balasana',
    pronunciation: 'oo-TEE-tah bah-LAHS-ah-nah',
    short_description: 'A lengthened child\'s pose with arms extended.',
    description: 'This variation stretches the spine and shoulders while maintaining the calming quality of Child\'s Pose. Extended arms create length through the entire back body.',
    benefits: ['Stretches entire spine', 'Opens shoulders', 'Calms the mind', 'Relieves tension', 'Lengthens side body'],
    cautions: ['Avoid shoulder strain', 'Support head if needed'],
    contraindications: ['Shoulder injury'],
    step_by_step: ['Kneel on mat', 'Separate knees hip-width', 'Extend arms forward', 'Walk hands away', 'Lower chest toward floor', 'Rest forehead on mat'],
    alignment_cues: ['Breathe into back body', 'Reach through fingertips', 'Relax shoulders down', 'Soften between shoulder blades'],
    modifications: ['Use blocks under hands', 'Support torso with bolster'],
    variations: ['Thread the needle', 'Side stretch'],
    tags: ['kneeling', 'stretch', 'restorative', 'beginner'],
    equipment: ['yoga mat'],
    difficulty: 'beginner',
    pose_type: 'kneeling',
    primary_focus: 'spine',
    secondary_focus: ['shoulders'],
    duration_hint_seconds: 60,
    is_peak_pose: false,
    is_warmup: false,
    is_cooldown: true,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Extended Child\'s Pose (Utthita Balasana) Guide',
    meta_description: 'Lengthen your spine and open shoulders in Extended Child\'s Pose. This gentle stretch calms the mind and relieves tension.',
    image_alt: 'Yoga practitioner in Extended Child\'s Pose with arms reaching forward.',
    image_original_filename: 'FLOW-19-24.125.png'
  },
  {
    slug: 'reverse-tabletop',
    english_name: 'Reverse Tabletop',
    sanskrit_name: 'Ardha Purvottanasana',
    sanskrit_name_simplified: 'Purvottanasana',
    pronunciation: 'AR-dah poor-voh-tahn-AHS-ah-nah',
    short_description: 'A reverse tabletop opening the front body.',
    description: 'This strengthening pose builds arm and glute strength while opening the chest and front body. The tabletop shape with hips lifted creates a gentle backbend.',
    benefits: ['Strengthens arms', 'Opens chest', 'Engages glutes', 'Builds wrist strength', 'Counteracts forward posture'],
    cautions: ['Keep shoulders stable', 'Avoid dropping neck back'],
    contraindications: ['Wrist injury', 'Shoulder injury'],
    step_by_step: ['Sit with knees bent', 'Place hands behind hips', 'Press into hands and feet', 'Lift hips to table height', 'Create flat back like table', 'Hold with steady breath'],
    alignment_cues: ['Press through feet firmly', 'Lift chest toward ceiling', 'Keep neck neutral', 'Engage glutes'],
    modifications: ['Keep gaze neutral', 'Lower hips slightly'],
    variations: ['With leg lift', 'Dynamic movement'],
    tags: ['backbend', 'strength', 'tabletop', 'intermediate'],
    equipment: ['yoga mat'],
    difficulty: 'intermediate',
    pose_type: 'supine',
    primary_focus: 'shoulders',
    secondary_focus: ['core'],
    duration_hint_seconds: 30,
    is_peak_pose: false,
    is_warmup: false,
    is_cooldown: false,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Reverse Tabletop (Ardha Purvottanasana) Guide',
    meta_description: 'Build strength and open your chest with Reverse Tabletop. This pose strengthens arms and counteracts forward posture.',
    image_alt: 'Yoga practitioner lifting hips in Reverse Tabletop position.',
    image_original_filename: 'FLOW-19-24.126.png'
  },
  {
    slug: 'reverse-tabletop-leg-lift',
    english_name: 'Reverse Tabletop Leg Lift',
    sanskrit_name: 'Ardha Purvottanasana',
    sanskrit_name_simplified: 'Purvottanasana',
    pronunciation: 'AR-dah poor-voh-tahn-AHS-ah-nah',
    short_description: 'A reverse tabletop with one leg lifted.',
    description: 'This challenging variation increases strength, balance, and coordination demands. Lifting one leg while maintaining the tabletop creates an intense full-body challenge.',
    benefits: ['Builds full-body strength', 'Improves balance', 'Engages core deeply', 'Challenges coordination', 'Strengthens glutes'],
    cautions: ['Stabilize shoulders', 'Lift with control'],
    contraindications: ['Wrist injury', 'Shoulder injury'],
    step_by_step: ['Enter Reverse Tabletop', 'Stabilize through core', 'Lift one leg straight', 'Keep hips level', 'Hold with control', 'Switch sides'],
    alignment_cues: ['Engage core throughout', 'Keep breath steady', 'Keep lifted leg straight', 'Maintain table shape'],
    modifications: ['Lower foot if needed', 'Smaller lift'],
    variations: ['Bent knee lift', 'Pulse movement'],
    tags: ['backbend', 'balance', 'strength', 'advanced'],
    equipment: ['yoga mat'],
    difficulty: 'advanced',
    pose_type: 'supine',
    primary_focus: 'core',
    secondary_focus: ['shoulders'],
    duration_hint_seconds: 30,
    is_peak_pose: true,
    is_warmup: false,
    is_cooldown: false,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Reverse Tabletop Leg Lift Pose Guide',
    meta_description: 'Challenge your strength and balance with Reverse Tabletop Leg Lift. This advanced variation builds full-body control.',
    image_alt: 'Yoga practitioner lifting one leg in Reverse Tabletop.',
    image_original_filename: 'FLOW-19-24.127.png'
  },
  {
    slug: 'reverse-plank',
    english_name: 'Reverse Plank',
    sanskrit_name: 'Purvottanasana',
    sanskrit_name_simplified: 'Purvottanasana',
    pronunciation: 'poor-voh-tahn-AHS-ah-nah',
    short_description: 'A strong reverse plank posture.',
    description: 'This powerful pose builds full-body strength while opening the entire front body. With straight legs and lifted hips, Reverse Plank creates an intense strengthening challenge.',
    benefits: ['Builds full-body strength', 'Opens chest completely', 'Improves posture', 'Strengthens wrists', 'Counteracts sitting'],
    cautions: ['Protect shoulders', 'Engage core throughout'],
    contraindications: ['Wrist injury', 'Shoulder injury'],
    step_by_step: ['Sit with legs extended', 'Place hands behind hips', 'Press into hands firmly', 'Lift hips toward ceiling', 'Create straight line from head to heels', 'Hold with strength'],
    alignment_cues: ['Press through hands firmly', 'Lift sternum high', 'Keep legs engaged', 'Point or flex feet'],
    modifications: ['Bend knees for tabletop', 'Lower hips slightly'],
    variations: ['With leg lift', 'Dynamic lowering'],
    tags: ['backbend', 'strength', 'core', 'advanced'],
    equipment: ['yoga mat'],
    difficulty: 'advanced',
    pose_type: 'supine',
    primary_focus: 'shoulders',
    secondary_focus: ['core'],
    duration_hint_seconds: 30,
    is_peak_pose: true,
    is_warmup: false,
    is_cooldown: false,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Reverse Plank (Purvottanasana) Complete Guide',
    meta_description: 'Build full-body strength with Reverse Plank. This powerful pose opens the chest and strengthens the entire back body.',
    image_alt: 'Yoga practitioner holding strong Reverse Plank position.',
    image_original_filename: 'FLOW-19-24.128.png'
  },
  {
    slug: 'supported-bridge',
    english_name: 'Supported Bridge Pose',
    sanskrit_name: 'Setu Bandha Sarvangasana',
    sanskrit_name_simplified: 'Setu Bandhasana',
    pronunciation: 'SET-oo BAHN-dah sar-vahn-GAHS-ah-nah',
    short_description: 'A supported bridge using props for gentle opening.',
    description: 'This gentle backbend supports spinal opening and relaxation using a block or bolster under the pelvis. It allows the body to receive the benefits of a backbend without effort.',
    benefits: ['Opens chest gently', 'Relieves fatigue', 'Supports spine', 'Calms nervous system', 'Reduces stress'],
    cautions: ['Avoid turning neck', 'Support hips properly'],
    contraindications: ['Neck injury'],
    step_by_step: ['Lie on back', 'Bend knees, feet flat', 'Lift hips slightly', 'Place block under sacrum', 'Lower onto support', 'Rest arms by sides'],
    alignment_cues: ['Relax throat completely', 'Breathe evenly and deeply', 'Let body be heavy', 'Soften face and jaw'],
    modifications: ['Use block at low height', 'Use bolster instead'],
    variations: ['Legs extended', 'One leg lifted'],
    tags: ['supine', 'backbend', 'restorative', 'beginner'],
    equipment: ['yoga mat', 'block'],
    difficulty: 'beginner',
    pose_type: 'supine',
    primary_focus: 'spine',
    secondary_focus: ['chest'],
    duration_hint_seconds: 120,
    is_peak_pose: false,
    is_warmup: false,
    is_cooldown: true,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Supported Bridge Pose (Setu Bandhasana) Guide',
    meta_description: 'Open your chest and restore your body with Supported Bridge Pose. This gentle backbend uses props for deep relaxation.',
    image_alt: 'Yoga practitioner resting in Supported Bridge with block.',
    image_original_filename: 'FLOW-19-24.129.png'
  },
  {
    slug: 'legs-lifted-supine',
    english_name: 'Legs Lifted Supine Pose',
    sanskrit_name: 'Urdhva Prasarita Padasana',
    sanskrit_name_simplified: 'Prasarita Padasana',
    pronunciation: 'OORD-vah prah-sah-REE-tah pah-DAHS-ah-nah',
    short_description: 'A supine pose with legs lifted off the mat.',
    description: 'This pose strengthens the core and improves circulation by lifting the legs while lying on the back. It builds abdominal strength and control.',
    benefits: ['Engages core strongly', 'Improves circulation', 'Builds control', 'Strengthens hip flexors', 'Develops focus'],
    cautions: ['Protect lower back', 'Move slowly'],
    contraindications: ['Lower back pain'],
    step_by_step: ['Lie on back', 'Press lower back into mat', 'Engage core muscles', 'Lift legs toward ceiling', 'Keep legs straight', 'Hold with control'],
    alignment_cues: ['Engage abdomen firmly', 'Breathe smoothly throughout', 'Press lower back down', 'Keep legs active'],
    modifications: ['Bend knees slightly', 'Lower legs higher angle'],
    variations: ['Legs at different angles', 'With movements'],
    tags: ['supine', 'core', 'strength', 'intermediate'],
    equipment: ['yoga mat'],
    difficulty: 'intermediate',
    pose_type: 'supine',
    primary_focus: 'core',
    secondary_focus: ['hips'],
    duration_hint_seconds: 30,
    is_peak_pose: false,
    is_warmup: false,
    is_cooldown: false,
    is_bilateral: true,
    status: 'published',
    meta_title: 'Legs Lifted Supine Pose Guide',
    meta_description: 'Build core strength with Legs Lifted Supine Pose. This controlled position strengthens the abdomen and improves circulation.',
    image_alt: 'Yoga practitioner lifting legs while lying on back.',
    image_original_filename: 'FLOW-19-24.130.png'
  }
];

async function importPoses() {
  console.log(`Importing ${poses.length} poses from folder 19-24 (121-130)...\n`);
  
  let created = 0, updated = 0, errors = 0;

  for (const pose of poses) {
    const { data: existing } = await supabase.from('poses').select('id').eq('slug', pose.slug).single();

    if (existing) {
      const { error } = await supabase.from('poses').update(pose).eq('slug', pose.slug);
      if (error) { console.log(`Error updating ${pose.slug}:`, error.message); errors++; }
      else { console.log(`Updated: ${pose.english_name}`); updated++; }
    } else {
      const { error } = await supabase.from('poses').insert(pose);
      if (error) { console.log(`Error creating ${pose.slug}:`, error.message); errors++; }
      else { console.log(`Created: ${pose.english_name}`); created++; }
    }
  }

  const { count } = await supabase.from('poses').select('*', { count: 'exact', head: true });
  console.log(`\n=== Import Complete ===\nCreated: ${created}\nUpdated: ${updated}\nErrors: ${errors}\nTotal poses: ${count}`);
}

importPoses();
